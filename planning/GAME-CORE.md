# üïµÔ∏è‚Äç‚ôÇÔ∏è RucaKiller - Juego de Rol Secreto

## üéØ Objetivo General

Cada jugador recibe una misi√≥n: **asesinar a otro jugador espec√≠fico bajo una condici√≥n secreta** (lugar + arma). Al mismo tiempo, alguien m√°s tendr√° como objetivo asesinarlo a √©l o ella. El juego se desarrolla durante un fin de semana en una parcela, funcionando como din√°mica de fondo durante la fiesta.

**Objetivo del juego como experiencia social:** Facilitar la interacci√≥n entre amigos que no se conocen entre s√≠, usando el juego como catalizador de socializaci√≥n.

---

## üîÅ Din√°mica General

- Cada jugador es **asesino y v√≠ctima** al mismo tiempo, formando una **cadena circular perfecta**.
- Solo se puede asesinar a la v√≠ctima **bajo una condici√≥n espec√≠fica**: un **lugar + un arma**.
- Al cumplir la misi√≥n, el asesino **hereda el objetivo de la v√≠ctima**. ‚ö†Ô∏è ESTO ES CR√çTICO
- Gana quien **queda vivo al final** o quien tenga **m√°s kills** si el tiempo se agota.
- M√°ximo **18 jugadores** (limitado por cantidad de armas √∫nicas).

---

## üéÆ Mec√°nica de Asesinato

### Proceso de Asesinato V√°lido:

1. **Condiciones requeridas:**
   - Estar en el **lugar correcto** (ej: Piscina)
   - Tener el **arma correcta** (ej: Ukelele)
   - Decirle a la v√≠ctima: **"Te mat√©"**

2. **Validaci√≥n (Honor System + Testigos):**
   - La **v√≠ctima** debe confirmar el asesinato en la app
   - Si hay disputa, se requieren **2 testigos** para validar
   - El asesino puede apelar al **GameMaster** en caso de desacuerdo

3. **Foto del asesinato (opcional/baja prioridad):**
   - El asesino puede tomar foto antes o despu√©s del asesinato
   - Debe mostrar: V√≠ctima + Arma + Lugar reconocible
   - Tiempo l√≠mite: 30 minutos para subirla
   - Prop√≥sito: Recuerdo y galer√≠a de momentos √©picos

4. **Herencia de objetivo:**
   - Inmediatamente despu√©s del asesinato validado, el asesino hereda el objetivo de su v√≠ctima

### Intento de Asesinato Fallido:

Si intentas asesinar **sin cumplir las condiciones** (lugar o arma incorrectos):

**Penitencias (se anuncia p√∫blicamente):**
- Tomarse un trago "al seco" **O** tirarse a la piscina
- Se cambian **ambas condiciones** (lugar Y arma) del asesino fallido
- Notificaci√≥n p√∫blica: *"[Nombre] intent√≥ un asesinato fallido y debe [penitencia]"*

---

## üó∫Ô∏è Lugares y Armas

### Lugares (5 opciones):
- **Piscina** (cerca del borde o dentro)
- **Quincho**
- **Puente** (cerca del puente)
- **Cocina**
- **Comedor Principal**

### Armas (18 opciones √∫nicas):
1. Ukelele
2. Golo
3. Extintor
4. Lana
5. Tarjeta BIP
6. Pokeball
7. Envase silicona
8. Lima de u√±as
9. Peluche pulpo
10. Bal√≥n de voleibol
11. Bomb√≠n de balones
12. Aro verde de malabares
13. Aro amarillo de malabares
14. Aro naranjo de malabares
15. Pir√°mide Rubik
16. Botella de perfume
17. Anillo apretable amarillo
18. Rodillo de cara

**Reglas de asignaci√≥n:**
- Los **lugares pueden repetirse** entre jugadores activos
- Las **armas NO pueden repetirse** entre jugadores activos
- Al morir un jugador, su arma queda **libre para reasignar**
- El GameMaster gestiona el inventario f√≠sico de armas

---

## ü¶∏ Personajes Especiales (Asignaci√≥n Aleatoria al Inicio)

Cada jugador puede recibir **un personaje especial** al azar. El poder es de **uso √∫nico** y puede usarse **cuando el jugador quiera** durante la partida.

| Personaje | Habilidad | Uso |
|-----------|-----------|-----|
| **Esp√≠a** | Puede ver el **nombre del objetivo** de otro jugador (NO ve condiciones) | Una vez, cuando quiera |
| **Detective** | Recibe una pista (lugar + arma) sobre un asesinato al azar. Debe deducir qui√©n est√° involucrado | Una vez, cuando quiera |
| **Saboteador** | Elige un jugador, ve sus condiciones actuales (lugar + arma), puede cambiar UNA de las dos por otra de su elecci√≥n. El objetivo NO es notificado | Una vez, cuando quiera |

**Nota:** Los jugadores conocen la existencia de estos roles al inicio, pero no saben qui√©n tiene cu√°l.

---

## üî™ Poderes Obtenibles (Al lograr 2 asesinatos exitosos)

Cuando un jugador alcanza **2 kills**, puede **elegir uno** de los siguientes poderes disponibles. Los poderes son **√∫nicos por partida** (m√°ximo 3 jugadores pueden tener poderes, uno de cada tipo).

| Poder | PRO | CONTRA | Uso |
|-------|-----|--------|-----|
| **Asesino Serial** | Puede asesinar a su v√≠ctima sin restricci√≥n de lugar (solo necesita el arma) | Su perseguidor TAMBI√âN pierde la restricci√≥n del lugar | Permanente hasta morir |
| **Investigador** | Puede ver el objetivo + condiciones (lugar + arma) de UN jugador a elecci√≥n | Al investigar a alguien, esa persona recibe notificaci√≥n "Alguien te investig√≥" | Una vez |
| **Sicario** | Puede elegir a su pr√≥xima v√≠ctima en vez de heredar el objetivo de su v√≠ctima m√°s reciente | El nuevo objetivo elegido recibe la pista: "Alguien te est√° cazando con [ARMA]" | Una vez |

**Disponibilidad:** Si los 3 poderes ya fueron tomados, el 4to jugador en llegar a 2 kills no obtiene poder.

---

## üó°Ô∏è Arma Especial: "Daga del Asesino"

Una √∫nica arma universal escondida f√≠sicamente en la parcela por el GameMaster.

**Caracter√≠sticas:**
- Sirve para asesinar a **cualquier objetivo** en **cualquier lugar**
- **Uso √∫nico** en toda la partida
- Quien la encuentre puede guardarla en secreto o usarla
- Al usarse, se env√≠a notificaci√≥n p√∫blica: *"La Daga del Asesino ha sido utilizada"*
- El GameMaster dar√° pistas peri√≥dicas sobre su ubicaci√≥n

---

## üé≤ Casos Especiales

### Ciclos de 2 o 3 jugadores:

Cuando quedan muy pocos jugadores y se forma un ciclo peque√±o (ej: Ana ‚Üí Diana ‚Üí Ana), el **GameMaster puede intervenir** para:
- Activar un evento especial
- Modificar condiciones para facilitar el cierre
- Declarar reglas especiales de combate final

### Jugador abandona o se va:

- El GameMaster puede **eliminar manualmente** al jugador
- Se considera que fue asesinado por su perseguidor
- El perseguidor hereda el objetivo del jugador eliminado
- El jugador eliminado **NO puede volver** a entrar al juego

### Reasignaci√≥n autom√°tica:

Al eliminarse un jugador de la cadena:
```
Antes: Ana ‚Üí Bruno ‚Üí Carlos ‚Üí Diana ‚Üí Ana
Carlos es asesinado por Bruno
Despu√©s: Ana ‚Üí Bruno ‚Üí Diana ‚Üí Ana
```

---

## üéØ Rol del GameMaster

### Permisos y Capacidades:

**Ver y monitorear:**
- ‚úÖ Estado de todos los jugadores (qui√©n persigue a qui√©n)
- ‚úÖ Historial de asesinatos e intentos fallidos
- ‚úÖ Dashboard con estad√≠sticas en tiempo real

**Gestionar juego:**
- ‚úÖ Configurar duraci√≥n, ventanas de tiempo
- ‚úÖ Pausar/reanudar el juego
- ‚úÖ Asignar lugares, armas y personajes especiales
- ‚úÖ Ajustar asignaciones antes y durante el juego
- ‚úÖ Activar eventos especiales

**Resolver problemas:**
- ‚úÖ Eliminar jugadores manualmente
- ‚úÖ Resolver disputas de asesinatos
- ‚úÖ Revocar poderes especiales si es necesario
- ‚úÖ Validar fotos de asesinatos

**Pistas y comunicaci√≥n:**
- ‚úÖ Dar pistas sobre la Daga del Asesino (verbalmente)
- ‚úÖ Gestionar inventario f√≠sico de armas

**Nota:** El GameMaster **solo administra**, no juega (tiene demasiada informaci√≥n privilegiada).

---

## üì± App - Plataforma Digital (PWA Next.js)

### Caracter√≠sticas Principales:

**Mobile First:**
- Dise√±o optimizado para celulares (iOS y Android)
- PWA (Progressive Web App) para instalaci√≥n sin tiendas

**Agente de IA con Voz (ElevenLabs):**
- Explica las reglas del juego
- Responde dudas sobre c√≥mo funciona la plataforma
- Accesible por micr√≥fono y parlante del celular
- **NO da informaci√≥n privilegiada** del juego

**Notificaciones (In-App):**
- Sistema de notificaciones dentro de la app (iOS tiene limitaciones PWA)
- Sonido y vibraci√≥n cuando hay eventos importantes
- Los jugadores deben revisar la app peri√≥dicamente

**Almacenamiento:**
- Supabase como backend (base de datos + autenticaci√≥n)
- Buckets de Supabase para almacenar fotos de asesinatos

---

## üîî Sistema de Notificaciones

### Notificaciones P√∫blicas (todos las ven):
- *"Se ha producido un asesinato"*
- *"Quedan X jugadores vivos"*
- *"El juego ha sido pausado"*
- *"[Nombre] intent√≥ un asesinato fallido y debe [penitencia]"*
- *"Un poder especial ha sido usado"*
- *"La Daga del Asesino ha sido utilizada"*

### Notificaciones Privadas (solo el jugador):
- *"Tu objetivo ha cambiado. Nuevo objetivo: [Nombre]"*
- *"Has heredado un nuevo objetivo: [Nombre]"*
- *"Alguien te investig√≥"* (si eres investigado por el poder Investigador)
- *"Alguien te est√° cazando con: [ARMA]"* (si eres elegido por el Sicario)

---

## üïê Estados y Flujo del Juego

### 1. LOBBY (Pre-juego):
- Jugadores se unen a la partida
- Pueden hablar con el agente de IA
- Ven las reglas generales
- **NO ven sus objetivos a√∫n**

### 2. ASIGNACI√ìN (GameMaster configura):
- GameMaster configura armas, lugares, duraci√≥n
- GameMaster asigna personajes especiales aleatoriamente
- GameMaster revisa y aprueba la cadena circular
- GameMaster esconde la Daga del Asesino

### 3. INICIO DEL JUEGO:
- Cada jugador recibe su objetivo + condiciones (lugar + arma)
- Se activan las ventanas de tiempo
- Comienza el juego

### 4. EN JUEGO (Activo):
- Se pueden validar asesinatos
- Se pueden usar poderes especiales
- Se registran eventos

### 5. PAUSADO:
- GameMaster paus√≥ temporalmente (ej: hora de almuerzo)
- NO se pueden validar asesinatos durante la pausa

### 6. FINALIZADO:
- Hay un ganador (√∫ltimo vivo o m√°s kills)
- Se muestra ranking final y estad√≠sticas
- Galer√≠a de fotos de asesinatos

---

## ‚è∞ Ventanas de Tiempo

**Onboarding:**
- Jugadores pueden entrar a la app **antes** del inicio del juego
- Pueden familiarizarse con la interfaz y hablar con la IA

**Juego Activo:**
- El GameMaster define horarios de inicio y fin
- Puede haber pausas obligatorias (comidas, actividades grupales)
- Ejemplo: S√°bado 10am - 2am con pausas para almuerzo y once

**Duraci√≥n flexible:**
- El GameMaster ajusta seg√∫n llegada de invitados y ritmo de la fiesta

---

## üèÅ Condiciones de Victoria

### Victoria por Supervivencia:
Si queda **1 solo jugador vivo** ‚Üí Es el ganador

### Victoria por Tiempo:
Si se acaba el tiempo y quedan **m√∫ltiples jugadores vivos** ‚Üí Gana quien tenga **m√°s asesinatos exitosos** (kills)

### Premiaci√≥n:
Se realiza al final del juego (ej: noche del s√°bado) con ranking y estad√≠sticas.

---

## üéØ Priorizaci√≥n de Features (Desarrollo)

### MUST HAVE (v1.0 - Versi√≥n Jugable):
1. ‚úÖ Sistema de lobby + unirse al juego
2. ‚úÖ GameMaster: Configurar lugares/armas/duraci√≥n
3. ‚úÖ Algoritmo de asignaci√≥n circular autom√°tica
4. ‚úÖ Vista del jugador: Ver objetivo + condiciones
5. ‚úÖ Bot√≥n "He asesinado" + confirmaci√≥n de v√≠ctima
6. ‚úÖ Herencia autom√°tica de objetivo
7. ‚úÖ Notificaciones p√∫blicas y privadas
8. ‚úÖ Dashboard del GameMaster (ver estado del juego)
9. ‚úÖ **Agente de voz IA (ElevenLabs)** - Explicar reglas y funcionamiento
10. ‚úÖ **Poderes por 2 kills** (Asesino Serial, Investigador, Sicario)
11. ‚úÖ **Personajes especiales** (Esp√≠a, Detective, Saboteador)

### NICE TO HAVE (v2.0 - Si hay tiempo):
- Daga del Asesino (arma especial escondida)
- Sistema de intentos fallidos + penitencias
- Subir fotos de asesinatos (Supabase buckets)
- Galer√≠a de fotos √©picas
- Estad√≠sticas avanzadas y gr√°ficos
- Eventos especiales del GameMaster

---

## üìä Notas de Dise√±o

- **The simpler the better:** Mantener la app lo m√°s automatizada posible
- **Honor System:** Confianza entre jugadores con opciones de validaci√≥n
- **GameMaster permisivo:** Validaci√≥n flexible en la primera versi√≥n
- **Progresivo:** Lanzar versi√≥n jugable primero, iterar despu√©s
